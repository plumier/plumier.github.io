(self.webpackChunkplumier_docs=self.webpackChunkplumier_docs||[]).push([[225],{876:function(e,t,n){"use strict";n.d(t,{Zo:function(){return s},kt:function(){return g}});var i=n(2784);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=i.createContext({}),c=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=c(e.components);return i.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),g=r,m=d["".concat(p,".").concat(g)]||d[g]||u[g]||a;return n?i.createElement(m,o(o({ref:t},s),{},{components:n})):i.createElement(m,o({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6478:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var i=n(7560),r=n(8283),a=(n(2784),n(876)),o=["components"],l={id:"swagger",title:"Swagger"},p={unversionedId:"swagger",id:"swagger",isDocsHomePage:!1,title:"Swagger",description:"Plumier provide facility to generate Open API 3.0 Specification commonly used by Swagger UI. The API specification directly generated from controllers metadata.",source:"@site/docs/Swagger.md",sourceDirName:".",slug:"/swagger",permalink:"/swagger",editUrl:"https://github.com/plumier/plumier/edit/master/docs/docusaurus/docs/Swagger.md",version:"current",frontMatter:{id:"swagger",title:"Swagger"},sidebar:"overview",previous:{title:"Query Parser",permalink:"/query-parser"},next:{title:"Social Media Login",permalink:"/social-login"}},c=[{value:"Enable The Facility",id:"enable-the-facility",children:[]},{value:"Swagger Endpoint",id:"swagger-endpoint",children:[]},{value:"Project Info",id:"project-info",children:[]},{value:"Decorator Customization (Optional)",id:"decorator-customization-optional",children:[{value:"Description",id:"description",children:[]},{value:"Response",id:"response",children:[]}]},{value:"Custom Authentication",id:"custom-authentication",children:[]}],s={toc:c};function u(e){var t=e.components,n=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Plumier provide facility to generate Open API 3.0 Specification commonly used by ",(0,a.kt)("a",{parentName:"p",href:"https://swagger.io/"},"Swagger")," UI. The API specification directly generated from controllers metadata. "),(0,a.kt)("h2",{id:"enable-the-facility"},"Enable The Facility"),(0,a.kt)("p",null,"To enable this facility you need to install the ",(0,a.kt)("inlineCode",{parentName:"p"},"@plumier/swagger")," and use the ",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerFacility")," on existing Plumier application like below: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { SwaggerFacility } from "@plumier/swagger"\n\nnew Plumier()\n        // ...... other facility\n        // activate Open Api generation and Swagger UI\n        .set(new SwaggerFacility())\n')),(0,a.kt)("p",null,"Above is the minimum configuration required to generate the Open Api 3.0 Specification, some configuration may needed but optional. "),(0,a.kt)("p",null,"Using above code Plumier automatically generate Open API 3.0 Specification using controllers metadata and create two endpoints: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"/swagger.json"),"  The Open API 3.0 Specification "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"/swagger")," The swagger UI  (API explorer)")),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Swagger UI and ",(0,a.kt)("inlineCode",{parentName:"p"},"swagger.json")," will be disabled on production. To force enable SwaggerUI on production, use environment variable ",(0,a.kt)("inlineCode",{parentName:"p"},"PLUM_ENABLE_SWAGGER")," with value ",(0,a.kt)("inlineCode",{parentName:"p"},"ui"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"json")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),"."))),(0,a.kt)("h2",{id:"swagger-endpoint"},"Swagger Endpoint"),(0,a.kt)("p",null,"By default the endpoint of the Swagger ui is ",(0,a.kt)("inlineCode",{parentName:"p"},"/swagger")," this endpoint is customisable by providing ",(0,a.kt)("inlineCode",{parentName:"p"},"endpoint")," on the ",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerFacility")," like below: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { SwaggerFacility } from "@plumier/swagger"\n\nnew Plumier()\n       // ...... other facility\n       .set(new SwaggerFacility({ endpoint: "/explorer" }))\n')),(0,a.kt)("p",null,"Above code will host the Swagger ui in ",(0,a.kt)("inlineCode",{parentName:"p"},"/explorer")," endpoint."),(0,a.kt)("h2",{id:"project-info"},"Project Info"),(0,a.kt)("p",null,"Swagger facility provide default project info for OpenAPI 3.0 spec, you can override this by providing it in facility constructor "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { SwaggerFacility } from "@plumier/swagger"\n\nnew Plumier()\n       // ...... other facility\n       .set(new SwaggerFacility({ \n           info: { \n               title: "Pet Api Explorer", \n               version: "1.0.0", \n               description: "Lorem ipsum" \n           } \n       }))\n')),(0,a.kt)("h2",{id:"decorator-customization-optional"},"Decorator Customization (Optional)"),(0,a.kt)("p",null,"Plumier provided decorators to customize the appearance of the swagger UI "),(0,a.kt)("h3",{id:"description"},"Description"),(0,a.kt)("p",null,"Description can be applied on the action or parameter like below"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { api } from "plumier"\n\nclass UsersController {\n    @api.description("Get user by user id")\n    @route.get(":id")\n    get(id:string){ }\n}\n')),(0,a.kt)("p",null,"Description receive string with markdown syntax"),(0,a.kt)("h3",{id:"response"},"Response"),(0,a.kt)("p",null,"Open API generator automatically check for action return type to generate the response schema. Keep in mind that when provided ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise")," you need to specify the return type manually like below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"{5}","{5}":!0},'import { api, meta } from "plumier"\n\nclass UsersController {\n    @route.get(":id")\n    @meta.type(x => User)\n    get(id:string): Promise<User>{ }\n}\n')),(0,a.kt)("h2",{id:"custom-authentication"},"Custom Authentication"),(0,a.kt)("p",null,"Plumier provided configuration to add custom authentication schema used to show the Swagger authentication dialog. To do that you can provide a custom facility to setup the configuration like below. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'export class ApiKeyFacility extends DefaultFacility {\n    setup(app: Readonly<PlumierApplication>): void {\n        // add security scheme for Swagger authentication dialogs\n        app.config.openApiSecuritySchemes.apiKey = { type: "apiKey", in: "header", name: "x-api-key" }\n    }\n}\n')),(0,a.kt)("p",null,"Using above configuration will add another authentication alternative on the Swagger UI."))}u.isMDXComponent=!0}}]);