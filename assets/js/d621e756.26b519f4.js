(self.webpackChunkplumier_docs=self.webpackChunkplumier_docs||[]).push([[793],{876:function(e,n,t){"use strict";t.d(n,{Zo:function(){return s},kt:function(){return v}});var r=t(2784);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=r.createContext({}),c=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=c(e.components);return r.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=c(t),v=o,f=m["".concat(u,".").concat(v)]||m[v]||p[v]||a;return t?r.createElement(f,l(l({ref:n},s),{},{components:t})):r.createElement(f,l({ref:n},s))}));function v(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=m;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var c=2;c<a;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7158:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return l},metadata:function(){return i},toc:function(){return u},default:function(){return s}});var r=t(7560),o=t(8283),a=(t(2784),t(876)),l={id:"custom-converter",title:"Custom Converter"},i={unversionedId:"custom-converter",id:"custom-converter",isDocsHomePage:!1,title:"Custom Converter",description:"Custom converter used when you want Plumier do some extra step (custom step) when transforming raw data or JSON object provided by Request that will be bound to the action parameters.",source:"@site/docs/Custom-Converter.md",sourceDirName:".",slug:"/custom-converter",permalink:"/custom-converter",editUrl:"https://github.com/plumier/plumier/edit/master/docs/docusaurus/docs/Custom-Converter.md",version:"current",frontMatter:{id:"custom-converter",title:"Custom Converter"}},u=[{value:"Example Boolean Conversion",id:"example-boolean-conversion",children:[]},{value:"Call Default Converter",id:"call-default-converter",children:[]}],c={toc:u};function s(e){var n=e.components,t=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Custom converter used when you want Plumier do some extra step (custom step) when transforming raw data or JSON object provided by Request that will be bound to the action parameters. "),(0,a.kt)("p",null,"To provide your own custom converter you need to register your own converter into plumier configuration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const app = new Plumier()\napp.set({ converters: [{ type: Boolean, converter: yourConverter }] })\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"type:Boolean")," mean you will be override the behavior of ",(0,a.kt)("inlineCode",{parentName:"p"},"Boolean")," converter. ",(0,a.kt)("inlineCode",{parentName:"p"},"yourConverter")," is a function with signature:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"(value: any, info: ObjectInfo<Function | Function[]>) => Promise<ConversionResult>\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ObjectInfo<Function | Function[]>")," is current conversion information. It has some properties:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"path")," is path of current value on nested object"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"expectedType")," expected type that the value will be converted into"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"converters")," list of converters that will be used by main converter function. This parameter required if you convert nested object and call ",(0,a.kt)("inlineCode",{parentName:"li"},"convert")," class manually.")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ConversionResult")," is a is a specialized class to return conversion value or error messages."),(0,a.kt)("h2",{id:"example-boolean-conversion"},"Example Boolean Conversion"),(0,a.kt)("p",null,"Example below will show how to create custom boolean converter. It will convert value from ",(0,a.kt)("inlineCode",{parentName:"p"},"YES")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"NO")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"true/false")," value."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { ObjectInfo, ConversionResult, ConversionMessage } from "@plumier/validator"\n\nasync function booleanConverter(value: {}, info: ObjectInfo<Function | Function[]>): Promise<ConversionResult> {\n    switch(value.toString().toLowerCase()){\n        case "yes" : return new ConversionResult(true)\n        case "no": return new ConversionResult(false)\n        //return error message\n        default: return new ConversionResult(new ConversionMessage(info.path, "Unable to convert value into boolean"))\n    }\n}\n')),(0,a.kt)("p",null,"Above code will convert ",(0,a.kt)("inlineCode",{parentName:"p"},"YES/NO")," value into ",(0,a.kt)("inlineCode",{parentName:"p"},"true/false")," with appropriate error message. Above converter than can be registered like below "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"const app = new Plumier()\napp.set({ converters: [{ type: Boolean, converter: booleanConverter }] })\n")),(0,a.kt)("p",null,"Above function will replace the default ",(0,a.kt)("inlineCode",{parentName:"p"},"Boolean")," converter. "),(0,a.kt)("h2",{id:"call-default-converter"},"Call Default Converter"),(0,a.kt)("p",null,"You can call the default bolean converter from inside your convert using ",(0,a.kt)("inlineCode",{parentName:"p"},"DefaultConverters")," namespace, or using ",(0,a.kt)("inlineCode",{parentName:"p"},"converters")," property from ",(0,a.kt)("inlineCode",{parentName:"p"},"ObjectInfo")," parameter."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { DefaultConverters, ObjectInfo, ConversionResult } from "@plumier/validator"\n\nfunction booleanConverter(rawValue: {}, info: ObjectInfo<Function | Function[]>): Promise<ConversionResult> {\n    //can be using this\n    const defaultResult = DefaultConverter.booleanConverter(rawValue, info)\n    //or this\n    const otherDefault = info.converters.get(Boolean)(rawValue, info)\n    //further processing\n}\n')))}s.isMDXComponent=!0}}]);