<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Create DB Migration · Plumier</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Info&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Create DB Migration · Plumier"/><meta property="og:type" content="website"/><meta property="og:url" content="https://plumierjs.com/"/><meta property="og:description" content="&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Info&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
"/><meta property="og:image" content="https://plumierjs.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://plumierjs.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/plumier.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/plumier.svg" alt="Plumier"/><h2 class="headerTitleWithLogo">Plumier</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/docs/tutorials/basic-sql/get-started" target="_self">Tutorials</a></li><li class=""><a href="https://github.com/plumier/plumier" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>SQL Restful API</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">SQL Restful API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/get-started">Get Started</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/create-domain">Create Domain Model</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/tutorials/basic-sql/create-migration">Create DB Migration</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/create-restful-api">Create Restful API</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/debugging">Debugging</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/create-custom-validation">Create Custom Validation</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/create-local-authentication">Create Local Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/securing-routes">Securing Routes</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/securing-domain">Securing Domain Models</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/basic-sql/deployment">Deployment</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Create DB Migration</h1></header><article><div><span><blockquote>
<p><strong>Info</strong>  <br>
This is the third part of 10 steps tutorial on creating basic SQL restful API. Check navigation to navigate to other steps.</p>
</blockquote>
<p>Database migration is a good solution to version control our database schema, its a part of continuous delivery to help deployment run smoothly.</p>
<p>In this section We will use MySQL database and connect to database using <a href="https://knexjs.org/">Knex.js</a> migration tools.</p>
<blockquote>
<p>Knex.js currently support various SQL database: Postgres, MSSQL, MySQL, MariaDB, SQLite3, Oracle, and Amazon Redshift.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="install-packages"></a><a href="#install-packages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Packages</h2>
<p>Basic rest api starter already contains some required packages. We will need another packages to interact with database. Enter command below from Visual Studio Code integrated terminal (Add new terminal if the current terminal used by the <code>start</code> script)</p>
<pre><code class="hljs css language-bash">$ yarn add knex @types/knex mysql2 bcrypt @types/bcrypt
</code></pre>
<p>Above command will install Knex.js its typing and MySQL package, we don't need MySQL typings because we won't interact directly with it.</p>
<h2><a class="anchor" aria-hidden="true" id="create-database"></a><a href="#create-database" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create Database</h2>
<p>Create an empty database using any MySQL client such as: phpMyAdmin or MySQL Command Line Client.</p>
<p>If you are using MySQL Command Line Client than enter command below:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># login to mysql using root or other user</span>
$ mysql -uroot -p
<span class="hljs-comment"># create database </span>
mysql&gt; create database todo;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="add-configuration-file"></a><a href="#add-configuration-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Configuration File</h2>
<p>Before start creating database migration, we need to setup configuration file to provide database uri.</p>
<p>Rename the <code>.env.example</code> file in the root directory into <code>.env</code> and add values below</p>
<pre><code class="hljs css language-env"><span class="hljs-attr">PORT</span>=<span class="hljs-number">8000</span>
<span class="hljs-attr">DB_URI</span>=<span class="hljs-string">"mysql://&lt;user&gt;:&lt;password&gt;@localhost/todo"</span>
</code></pre>
<p>Change <code>&lt;user&gt;</code> and <code>&lt;password&gt;</code> match your MySQL configuration. <code>todo</code> is the database name that we created previously.</p>
<p><code>.env</code> file above will be loaded on application startup by using <code>dotenv</code> package and the value will be available from <code>process.env</code>. For example <code>process.env.PORT</code> and <code>process.env.DB_URI</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="add-configuration-typings"></a><a href="#add-configuration-typings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Configuration Typings</h2>
<p>We added <code>DB_URI</code> field on our configuration file, but for a moment TypeScript will not be able to provide intellisense (auto complete) for the field. So if we mistype <code>process.env.DBURI</code> TypeScript will not notice the problem.</p>
<p>Project starter provide typings file <code>src/config.d.ts</code> that will <a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation">augment</a> the <code>process.env</code>, so we will be able to add type check and intellisense for new configuration.</p>
<p>Navigate to <code>src/config.d.ts</code> and add <code>DB_URI</code> property on <code>ProcessEnv</code> interface</p>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> NodeJS {
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ProcessEnv {
        PORT: <span class="hljs-built_in">string</span>
        DB_URI: <span class="hljs-built_in">string</span> <span class="hljs-comment">//&lt;-- add this</span>
    }
}
</code></pre>
<p>By adding above property, TypeScript will be able to provide intellisense for the <code>DB_URI</code> on the <code>process.env.DB_URI</code></p>
<h2><a class="anchor" aria-hidden="true" id="create-database-migration"></a><a href="#create-database-migration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create Database Migration</h2>
<p>Start configuring migration by adding <code>knexfile.ts</code> in the  root project directory, and type code below:</p>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">import</span> { Config } <span class="hljs-keyword">from</span> <span class="hljs-string">"knex"</span>;
<span class="hljs-keyword">import</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>

dotenv.load()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> configuration: Config = {
    client: <span class="hljs-string">'mysql2'</span>,
    connection: process.env.DB_URI,
    migrations: {
        tableName: <span class="hljs-string">'_knex_migrations'</span>,
        directory: <span class="hljs-string">"./db/migrations"</span>
    },
    seeds: {
        directory: <span class="hljs-string">"./db/seeds"</span>
    }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> development: Config = { ...configuration }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> production: Config = { ...configuration }
</code></pre>
<p>File above will be used by Knex.js migration tool to locate the migration file, seeds file and some basic database configuration. It loads <code>.env</code> to fill the <code>DB_URI</code> configuration.</p>
<p>Next we need to create migration file for the first version of our application. Create new file inside <code>db/migrations</code> directory named <code>v1.0.0.ts</code> and write code below</p>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Knex <span class="hljs-keyword">from</span> <span class="hljs-string">"knex"</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baseTable</span>(<span class="hljs-params">t: Knex.CreateTableBuilder, knex: Knex</span>) </span>{
    t.bigIncrements(<span class="hljs-string">"id"</span>)
    t.timestamp(<span class="hljs-string">"createdAt"</span>).defaultTo(knex.fn.now())
    t.boolean(<span class="hljs-string">"deleted"</span>).defaultTo(<span class="hljs-literal">false</span>)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span>(<span class="hljs-params">knex: Knex</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">any</span>&gt; </span>{
    <span class="hljs-keyword">return</span> knex.transaction(<span class="hljs-function"><span class="hljs-params">trx</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> trx.schema
            .createTable(<span class="hljs-string">"User"</span>, <span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> {
                baseTable(t, trx)
                t.string(<span class="hljs-string">"email"</span>)
                t.string(<span class="hljs-string">"password"</span>)
                t.string(<span class="hljs-string">"name"</span>)
                t.string(<span class="hljs-string">"role"</span>)
            })
            .createTable(<span class="hljs-string">"Todo"</span>, <span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> {
                baseTable(t, trx)
                t.string(<span class="hljs-string">"todo"</span>)
                t.bigInteger(<span class="hljs-string">"userId"</span>).unsigned().references(<span class="hljs-string">"id"</span>).inTable(<span class="hljs-string">"User"</span>)
                t.boolean(<span class="hljs-string">"completed"</span>).defaultTo(<span class="hljs-literal">false</span>)
            })
    })
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">down</span>(<span class="hljs-params">knex: Knex</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">any</span>&gt; </span>{
    <span class="hljs-keyword">return</span> knex.transaction(<span class="hljs-function"><span class="hljs-params">trx</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> trx.schema
            .dropTable(<span class="hljs-string">"Todo"</span>)
            .dropTable(<span class="hljs-string">"User"</span>)
    })
};
</code></pre>
<p>Code above will create two tables <code>User</code> and <code>Todo</code>. Each table has the same columns with the appropriate domain. <code>User</code> domain will represent <code>User</code> table and <code>Todo</code> domain represent <code>Todo</code> table.</p>
<p>We define a common function <code>baseTable</code> to setup columns defined in <code>Domain</code> base class to prevent duplication.</p>
<p>Then we provided the <code>up</code> and <code>down</code> function for Knex.js migration tool for migrate and rollback function.</p>
<p>Keep in mind that the order of the table creation/deletion is important. On <code>up</code> function parent table should be created first then child table should be the last. On <code>down</code> function child table should be dropped first then parent table.</p>
<h2><a class="anchor" aria-hidden="true" id="create-seeds"></a><a href="#create-seeds" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create Seeds</h2>
<p>Seeds used to add some default value to created table after migration. We need to add default value for our application administration user, so we have the first user used to manage the application.</p>
<p>Create directory <code>db/seeds</code> and add file named <code>seeds.ts</code> then write code below.</p>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Knex <span class="hljs-keyword">from</span> <span class="hljs-string">"knex"</span>;
<span class="hljs-keyword">import</span> { User } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../src/model/domain"</span>;
<span class="hljs-keyword">import</span> bcrypt <span class="hljs-keyword">from</span> <span class="hljs-string">"bcrypt"</span>

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addDefaultAdmin</span>(<span class="hljs-params">knex:Knex</span>)</span>{
    <span class="hljs-keyword">const</span> defaultUserEmail = <span class="hljs-string">"admin@todo.app"</span>
    <span class="hljs-keyword">const</span> defaultUserPassword = <span class="hljs-keyword">await</span> bcrypt.hash(<span class="hljs-string">"123456"</span>, <span class="hljs-number">10</span>)
    <span class="hljs-keyword">const</span> exists = <span class="hljs-keyword">await</span> knex.table(<span class="hljs-string">"User"</span>).where({email: defaultUserEmail}).first()
    <span class="hljs-keyword">if</span>(!exists){
        <span class="hljs-keyword">await</span> knex.table(<span class="hljs-string">"User"</span>).insert(&lt;User&gt;{
            email: defaultUserEmail,
            password: defaultUserPassword,
            name: <span class="hljs-string">"Todo Admin"</span>,
            role: <span class="hljs-string">"Admin"</span>
        })
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">seed</span>(<span class="hljs-params">knex: Knex</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">any</span>&gt; </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([
        addDefaultAdmin(knex)
    ])
}
</code></pre>
<p><code>seed</code> function will be called by Knex.js migration tools, we need to execute the command separately after migration.</p>
<p><code>addDefaultAdmin</code> function will check for existing user by</p>
<h2><a class="anchor" aria-hidden="true" id="execute-migrations-and-seeds"></a><a href="#execute-migrations-and-seeds" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Execute Migrations and Seeds</h2>
<p>Our setup is ready for testing database migration, open Visual Studio Integrated terminal and enter command below to execute the database migration.</p>
<pre><code class="hljs css language-bash">$ npx knex --knexfile knexfile.ts migrate:latest 
</code></pre>
<p>If you follow all the step above, migration tool will print message like picture below</p>
<p><img src="../../assets/tutorial/migration-successful.png" alt="migration success"></p>
<p>Check if tables created successfully by using MySQL client application.</p>
<p>If we confirmed the table created successfully we can execute the seeds to add the default admin</p>
<pre><code class="hljs css language-bash">$ npx knex --knexfile knexfile.ts seed:run 
</code></pre>
<p>Above code should add default admin to the <code>User</code> table. You can check using MySQL client application like below.</p>
<p><img src="../../assets/tutorial/seeds-successful.png" alt="seeds successful"></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/tutorials/basic-sql/create-domain"><span class="arrow-prev">← </span><span>Create Domain Model</span></a><a class="docs-next button" href="/docs/tutorials/basic-sql/create-restful-api"><span>Create Restful API</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#install-packages">Install Packages</a></li><li><a href="#create-database">Create Database</a></li><li><a href="#add-configuration-file">Add Configuration File</a></li><li><a href="#add-configuration-typings">Add Configuration Typings</a></li><li><a href="#create-database-migration">Create Database Migration</a></li><li><a href="#create-seeds">Create Seeds</a></li><li><a href="#execute-migrations-and-seeds">Execute Migrations and Seeds</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2019 Plumier</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'cc5032f20c325b27c07de03fe7078651',
                indexName: 'plumierjs',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>