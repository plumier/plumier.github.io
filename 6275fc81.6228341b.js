(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),p=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),s=p(n),m=a,u=s["".concat(l,".").concat(m)]||s[m]||d[m]||i;return n?r.a.createElement(u,o(o({ref:t},c),{},{components:n})):r.a.createElement(u,o({ref:t},c))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},150:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/swagger-a3e6e8c80d9743ab587b918badc447e7.png"},86:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(7),i=(n(0),n(105)),l={id:"fundamentals",title:"Fundamentals",slug:"/"},o={unversionedId:"fundamentals",id:"fundamentals",isDocsHomePage:!1,title:"Fundamentals",description:"Plumier is A TypeScript backend framework focuses on development productivity with dedicated reflection library to help you create a robust, secure and fast API delightfully.",source:"@site/docs/Fundamentals.md",slug:"/",permalink:"/",editUrl:"https://github.com/plumier/plumier/edit/master/website/docs/Fundamentals.md",version:"current",sidebar:"overview",next:{title:"Get Started",permalink:"/get-started"}},b=[{value:"Map ORM Entities into CRUD APIs",id:"map-orm-entities-into-crud-apis",children:[]},{value:"Secure Entities with Authorization",id:"secure-entities-with-authorization",children:[]},{value:"Define Filterable Fields",id:"define-filterable-fields",children:[]},{value:"Map One To Many Into Nested CRUD API",id:"map-one-to-many-into-nested-crud-api",children:[]},{value:"Validate User Data Declaratively",id:"validate-user-data-declaratively",children:[]},{value:"Generate Open API 3.0 Schema from Controllers",id:"generate-open-api-30-schema-from-controllers",children:[]},{value:"Handle Complex Request with Common Controller",id:"handle-complex-request-with-common-controller",children:[]},{value:"Bind Request Part Into Action&#39;s Parameter",id:"bind-request-part-into-actions-parameter",children:[]},{value:"Plug Facilities Into Application Bootstrap",id:"plug-facilities-into-application-bootstrap",children:[]},{value:"Layout Your Source Code Freely",id:"layout-your-source-code-freely",children:[]},{value:"Single File Style",id:"single-file-style",children:[]},{value:"Classic MVC Style",id:"classic-mvc-style",children:[]},{value:"Modular Style",id:"modular-style",children:[]}],c={rightToc:b};function p(e){var t=e.components,l=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,l,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Plumier is A TypeScript backend framework focuses on development productivity with dedicated reflection library to help you create a robust, secure and fast API delightfully. "),Object(i.b)("h3",{id:"map-orm-entities-into-crud-apis"},"Map ORM Entities into CRUD APIs"),Object(i.b)("p",null,"Plumier provided generic controllers to increase your productivity developing secure Restful API. Generic controllers are reusable controllers with a generic type signature, its take advantage of reflection and inheritance to provide Restful CRUD function with some useful operation such as filtering, ordering and response projection out of the box. Using it you will be able to create CRUD API rapidly based on your ORM entities (TypeORM entity, Mongoose with mongoose helper)."),Object(i.b)("p",null,"Generic controllers are highly customizable, you can define your own route path, disable some routes, hook the saving process and even you can provide your own custom generic controller. "),Object(i.b)("p",null,"You use generic controller by decorating your entity with ",Object(i.b)("inlineCode",{parentName:"p"},"@route.controller()")," then Plumier automatically create derived generic controller based on your entity on the fly. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{4}","{4}":!0}),'import { route } from "plumier"\nimport { Entity, Column, CreateDateColumn, PrimaryGeneratedColumn } from "typeorm"\n\n@route.controller()\n@Entity()\nexport class Post {\n    @PrimaryGeneratedColumn()\n    id: number\n\n    @Column()\n    slug:string\n\n    @Column()\n    title:string\n\n    @Column()\n    content:string\n\n    @CreateDateColumn()\n    createdAt:Date\n}\n')),Object(i.b)("p",null,"Above code is a common TypeORM entities marked with Plumier decorators. The ",Object(i.b)("inlineCode",{parentName:"p"},"Category")," entity marked with ",Object(i.b)("inlineCode",{parentName:"p"},"@route.controller()")," it tells Plumier that the entity should be handled by a generic controller. "),Object(i.b)("p",null,"Code above will generated into routes that follow Restful best practice like below."),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Method"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Path"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"POST"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Create new post")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"GET"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get list of posts with paging, filter, order and projection")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"GET"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get single post by id with projection")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PUT"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Replace post by id")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PATCH"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Modify post by id (required validation ignored)")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"DELETE"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Delete post by id")))),Object(i.b)("h3",{id:"secure-entities-with-authorization"},"Secure Entities with Authorization"),Object(i.b)("p",null,"Plumier has a powerful authorization system to protect your API endpoints and data based on your user roles. The authorization can be enabled by installing ",Object(i.b)("inlineCode",{parentName:"p"},"JwtAuthFacility"),"."),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Facility is a component used to configure Plumier application to add a new functionalities. It consist of ordered middlewares, some initialization process before the application started and some application configurations. Facility installed on application bootstrap like below."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"new Plumier()\n  .set(new WebApiFacility()) //install API functionalities\n  .set(new JwtAuthFacility()) //install authorization functionalities\n")))),Object(i.b)("p",null,"Before proceeding on security functionality, its important to notice that Plumier role system is depends on the JWT claim named ",Object(i.b)("inlineCode",{parentName:"p"},"role"),". You define the login user role by specify user role during JWT signing process like below."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{10}","{10}":!0}),'import { route } from "plumier"\nimport { sign } from "jsonwebtoken"\n\nexport class AuthController {\n    // POST /auth/login\n    @route.post()\n    async login(email:string, password:string) {\n        // other login process\n        const user = await repo.findByEmail(email)\n        const token = sign({ userId: user.id, role: user.role }, \n          process.env.YOUR_JWT_SECRET)\n        return { token }\n    }\n}\n')),Object(i.b)("p",null,"Role claim can be any string such as ",Object(i.b)("inlineCode",{parentName:"p"},"SuperAdmin"),", ",Object(i.b)("inlineCode",{parentName:"p"},"Supervisor"),", ",Object(i.b)("inlineCode",{parentName:"p"},"Staff"),", ",Object(i.b)("inlineCode",{parentName:"p"},"Admin"),", ",Object(i.b)("inlineCode",{parentName:"p"},"User")," etc. Further more this roles can be used to secure your API endpoints or data using ",Object(i.b)("inlineCode",{parentName:"p"},"@authorize")," decorator like below "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{7,8,19}","{7,8,19}":!0}),'import { route, authorize } from "plumier"\nimport { Column, Entity, PrimaryGeneratedColumn } from "typeorm"\n\n// only Supervisor and Manager has access to the \n// post, patch, put, delete route endpoints\n@route.controller(config => {\n  config.actions("Post", "Put", "Patch", "Delete")\n        .authorize("Supervisor", "Manager")\n})\n@Entity()\nexport class Item {\n    @PrimaryGeneratedColumn()\n    id: number\n\n    @Column()\n    name: string\n\n    // only Supervisor and Manager can see basePrice on response result\n    @authorize.read("Supervisor", "Manager")\n    @Column()\n    basePrice: string\n\n    @Column()\n    price: string\n}\n')),Object(i.b)("p",null,"Code above showing that the entity handled by a generic controller and decorated with some ",Object(i.b)("inlineCode",{parentName:"p"},"@authorize")," decorators. It will be generated into routes below."),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Method"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Path"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Accessible By"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"POST"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/items")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Supervisor, Manager"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Create new post")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"GET"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/items")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Any login user"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get list of items with paging, filter, order and projection")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"GET"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/items/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Any login user"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get single post by id with projection")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PUT"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/items/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Supervisor, Manager"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Replace post  by id")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PATCH"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/items/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Supervisor, Manager"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Modify post property by id")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"DELETE"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/items/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Supervisor, Manager"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Delete post by id")))),Object(i.b)("p",null,"Note that route with http method ",Object(i.b)("inlineCode",{parentName:"p"},"POST"),", ",Object(i.b)("inlineCode",{parentName:"p"},"PUT"),", ",Object(i.b)("inlineCode",{parentName:"p"},"PATCH"),", ",Object(i.b)("inlineCode",{parentName:"p"},"DELETE")," only authorized to the ",Object(i.b)("inlineCode",{parentName:"p"},"Supervisor")," and ",Object(i.b)("inlineCode",{parentName:"p"},"Manager")," role, while the ",Object(i.b)("inlineCode",{parentName:"p"},"GET")," endpoints (get by id, and list) authorized to all login users. "),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"basePrice")," decorated with ",Object(i.b)("inlineCode",{parentName:"p"},"@authorize.read()")," which will show/hide the response result based on user role. Its mean the ",Object(i.b)("inlineCode",{parentName:"p"},"basePrice")," will only visible to ",Object(i.b)("inlineCode",{parentName:"p"},"Supervisor")," and ",Object(i.b)("inlineCode",{parentName:"p"},"Owner"),"  "),Object(i.b)("p",null,"There are more authorization decorator available"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Decorator"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@authorize.write(<role or policy>)")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Protect property only can be write by specific role")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@authorize.read(<role or policy>)")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Protect property only can be read by specific role")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@authorize.readonly()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Protect property only can be read and no other role can write it")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@authorize.writeonly()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Protect property only can be write and no other role can read it")))),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"documentation ")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Refer to ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/authorization"}),"this documentation")," to get detail information about authorization"))),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"documentation ")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Refer to ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/generic-controller#control-access-to-the-generated-routes"}),"this documentation")," to get detail information on securing generic controller routes. "))),Object(i.b)("h3",{id:"define-filterable-fields"},"Define Filterable Fields"),Object(i.b)("p",null,"Generic controller provided functionalities to refine the API response, such as filter, paging, order and projection. For security reason,  filtering is not enabled by default, you need to specify which field is filterable by using ",Object(i.b)("inlineCode",{parentName:"p"},"@authorize.filter(<role>)")," decorator. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{10,14,21}","{10,14,21}":!0}),'import { route, authorize } from "plumier"\nimport { Entity, Column, CreateDateColumn, PrimaryGeneratedColumn } from "typeorm"\n\n@route.controller()\n@Entity()\nexport class Post {\n    @PrimaryGeneratedColumn()\n    id: number\n\n    @authorize.filter()\n    @Column()\n    slug:string\n\n    @authorize.filter()\n    @Column()\n    title:string\n\n    @Column()\n    content:string\n\n    @authorize.filter()\n    @CreateDateColumn()\n    createdAt:Date\n}\n')),Object(i.b)("p",null,"Above code enabled filters for ",Object(i.b)("inlineCode",{parentName:"p"},"slug"),", ",Object(i.b)("inlineCode",{parentName:"p"},"title")," and ",Object(i.b)("inlineCode",{parentName:"p"},"createdAt")," fields. Using above generated API you may request like below."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"# Filter response based on slug property using equals comparison\nGET /posts?filter[slug]=my_cool_post\n\n# Perform range filter between dates using triple dots\nGET /posts?filter[createdAt]=2020-9-1...2020-10-1\n\n# Perform conditional filter (greater or equal than 9/1/2020)\nGET /posts?filter[createdAt]=>=2020-9-1\n\n# Perform search on title that starts with word programming using asterisk\nGET /posts?filter[title]=programming*\n\n# Perform search on title that ends with word programming using asterisk\nGET /posts?filter[title]=*programming\n\n# Paginate response to narrow filter result \nGET /posts?offset=20&limit=50\n\n# Order response by createdAt desc and slug asc\nGET /posts?order=-createdAt,slug\n\n# Select only title and content visible on response \nGET /posts?select=title,content\n")),Object(i.b)("p",null,"Filter can be authorized to specific role or policy by providing list of allowed roles or policies on the decorator such as ",Object(i.b)("inlineCode",{parentName:"p"},'@authorize.filter("Administrator", "Staff")')),Object(i.b)("h3",{id:"map-one-to-many-into-nested-crud-api"},"Map One To Many Into Nested CRUD API"),Object(i.b)("p",null,"ORM entities may contains relations to represent join to another table, Plumier provided nested generic controller to perform parent children  operation easily."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{11}","{11}":!0}),'import { route } from "plumier"\nimport { Entity, OneToMany, PrimaryGeneratedColumn } from "typeorm"\n\n@Entity()\nexport class Post {\n    @PrimaryGeneratedColumn()\n    id: number\n\n    /** other properties **/\n\n    @route.controller()\n    @OneToMany(x => Comment, x => x.post)\n    comments: Comment[]\n}\n\n@Entity()\nexport class Comment {\n    @PrimaryGeneratedColumn()\n    id: number\n\n    @ManyToOne(x => User)\n    user: User \n\n    @Column()\n    comment:string\n\n    @ManyToOne(x => Post, x => x.comments)\n    post:Post\n}\n')),Object(i.b)("p",null,"Above code showing that the relation property ",Object(i.b)("inlineCode",{parentName:"p"},"comments")," marked with ",Object(i.b)("inlineCode",{parentName:"p"},"@route.controller()")," decorators. It tells Plumier to create a nested generic controller to perform parent children operation. Above code will generated into routes below."),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Method"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Path"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"POST"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:pid/comments")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Create new post's comment")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"GET"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:pid/comments")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get list of post's comments with paging, filter, order and projection")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"GET"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:pid/comments/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get single post's comment by id with projection")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PUT"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:pid/comments/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Replace post's comment  by id")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"PATCH"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:pid/comments/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Modify post's comment property by id")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"DELETE"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"/posts/:pid/comments/:id")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Delete post's comment by id")))),Object(i.b)("p",null,"To do the parent children operation on Post and Comment its required to use the Post ID on the route parameter. Then your POST request to create a new comment to specific post is like below"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'# create new comments for Post with ID 12345\nPOST /posts/12345/comments HTTP/1.1\nHost: localhost:8000\nContent-Type: application/json\n{ "user": 5678, "comment": "Great article" }\n')),Object(i.b)("p",null,"Above request will add comment to the post with ID ",Object(i.b)("inlineCode",{parentName:"p"},"12345"),". Note that the ",Object(i.b)("inlineCode",{parentName:"p"},"user")," property can be filled with User ID ",Object(i.b)("inlineCode",{parentName:"p"},"5678"),"."),Object(i.b)("p",null,"Nested generic controller also supported filter parameter to refine the response result explained earlier. "),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"Documentation")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Read more detail information about Generic Controller in this ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/generic-controller"}),"documentation")))),Object(i.b)("h3",{id:"validate-user-data-declaratively"},"Validate User Data Declaratively"),Object(i.b)("p",null,"Plumier provided comprehensive list of validator, uses ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/validator"}),"ValidatorJS")," internally. You specify validation using ",Object(i.b)("inlineCode",{parentName:"p"},"@val")," decorator. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{9-11,15,19}","{9-11,15,19}":!0}),'import { val } from "plumier"\nimport { Entity, Column, CreateDateColumn, PrimaryGeneratedColumn } from "typeorm"\n\n@Entity()\nexport class User {\n    @PrimaryGeneratedColumn()\n    id: number\n\n    @val.email()\n    @val.unique()\n    @val.required()\n    @Column()\n    email: string\n\n    @val.required()\n    @Column()\n    name:string\n\n    @val.url()\n    @Column()\n    profilePicture:string\n}\n')),Object(i.b)("p",null,"There are more than 40 validators to use to secure your API consumer request. "),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Refer to ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/validation"}),"validator documentation")," for more information "))),Object(i.b)("h3",{id:"generate-open-api-30-schema-from-controllers"},"Generate Open API 3.0 Schema from Controllers"),Object(i.b)("p",null,"Plumier provided ",Object(i.b)("inlineCode",{parentName:"p"},"SwaggerFacility")," to automatically generate Open API 3.0 schema from both controller and generic controller. Open API 3.0 Schema automatically generated by reading and transforming controller's metadata on the fly. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{5}","{5}":!0}),'import { SwaggerFacility } from "@plumier/swagger"\n\nnew Plumier()\n  /* other facilities */\n  .set(new SwaggerFacility()) \n')),Object(i.b)("p",null,"The generated Open API 3.0 schema can be customized minimally, but mostly everything will just work out of the box. ",Object(i.b)("inlineCode",{parentName:"p"},"SwaggerFacility")," hosts the SwaggerUI under ",Object(i.b)("inlineCode",{parentName:"p"},"/swagger")," endpoint."),Object(i.b)("p",null,Object(i.b)("img",{alt:"swagger",src:n(150).default})),Object(i.b)("h3",{id:"handle-complex-request-with-common-controller"},"Handle Complex Request with Common Controller"),Object(i.b)("p",null,"Generic controller is just an implementation of Plumier controller with generic class signature. Even though generic controller can be fully customized to match your app requirements, in some case its may required to use a controller manually to handle user request. "),Object(i.b)("p",null,"The term of Controller in Plumier is the same as in other MVC framework. Plumier controller is a plain class end with ",Object(i.b)("inlineCode",{parentName:"p"},"Controller")," for example ",Object(i.b)("inlineCode",{parentName:"p"},"class UsersController"),". A route automatically generated based on ",Object(i.b)("inlineCode",{parentName:"p"},"/controller/action"),". This behavior can be customized using ",Object(i.b)("inlineCode",{parentName:"p"},"@route")," decorator."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { route } from "plumier"\n\nexport class UsersController {\n    // GET /users/:id\n    @route.get(":id")\n    get(id:string) { \n\n      // return value or Promise that \n      // automatically rendered into JSON response\n      return repo.findOne(id)\n    }\n}\n')),Object(i.b)("p",null,"Controller can return any value including ",Object(i.b)("inlineCode",{parentName:"p"},"Promise"),", this value then rendered into JSON response automatically. You can have more control to the response by returning the ",Object(i.b)("inlineCode",{parentName:"p"},"ActionResult")," or use the built-in ",Object(i.b)("inlineCode",{parentName:"p"},"response")," function."),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Action"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Alias"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Package"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"ActionResult")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"response.json()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Return json response"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"plumier"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"RedirectActionResult")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"response.redirect()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Redirect response"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"plumier"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"FileActionResult")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"response.file()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Serve static file response"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@plumier/serve-static"))))),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"documentation")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Refer to the complete documentation about ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/routing"}),"routing")))),Object(i.b)("h3",{id:"bind-request-part-into-actions-parameter"},"Bind Request Part Into Action's Parameter"),Object(i.b)("p",null,"Action parameter can be bound into request part such as query, body, header etc. Request values received automatically converted into data type match with action parameter data type. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { route } from "plumier"\n\nexport class UsersController {\n    // GET /users/list\n    @route.get()\n    list(offset:number = 0, limit:number = 50, active:boolean = true) {\n        \n    }\n}\n')),Object(i.b)("p",null,"Above controller generated into ",Object(i.b)("inlineCode",{parentName:"p"},"GET /users/list?limit&offset&active"),". All parameters are optional with their default values. Note that the value automatically converted match with parameter data type, giving these request are valid"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"GET /users/list \nGET /users/list?limit=20\nGET /users/list?offset=20&limit=20\nGET /users/list?offset=10&active=true\nGET /users/list?active=1\n")),Object(i.b)("p",null,"Important to notice that boolean parameter can be filled with: ",Object(i.b)("inlineCode",{parentName:"p"},"yes"),", ",Object(i.b)("inlineCode",{parentName:"p"},"no"),", ",Object(i.b)("inlineCode",{parentName:"p"},"true"),", ",Object(i.b)("inlineCode",{parentName:"p"},"false"),", ",Object(i.b)("inlineCode",{parentName:"p"},"1"),", ",Object(i.b)("inlineCode",{parentName:"p"},"0"),". And parameter of type datetime can be filled with ",Object(i.b)("inlineCode",{parentName:"p"},"2020-12-31")," or ",Object(i.b)("inlineCode",{parentName:"p"},"2020-10-05T23:28:33.598Z")," "),Object(i.b)("p",null,"Parameters also can be bound with request body by providing a parameter of type of custom object to hold the request body like example below"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { route, domain } from "plumier"\n\n@domain()\nexport class Login {\n    constructor(\n        public email:string,\n        public password:string,\n    ){}\n}\n\nexport class AuthController {\n    // POST /auth/login\n    @route.post()\n    login(data:Login) {\n        \n    }\n}\n')),Object(i.b)("p",null,"Above controller will be generated into ",Object(i.b)("inlineCode",{parentName:"p"},"POST /auth/login")," with request body ",Object(i.b)("inlineCode",{parentName:"p"},'{ "email":<string>, "password": <string> }')," "),Object(i.b)("p",null,"Plumier provided decorators to bind specific request body to parameter, you can use the ",Object(i.b)("inlineCode",{parentName:"p"},"@bind")," decorator on specific parameter. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript",metastring:"{6}","{6}":!0}),'import { route, bind } from "plumier"\n\nexport class UsersController {\n    // GET /users/:id\n    @route.get(":id")\n    get(id:string, @bind.user() user:LoginUser) { }\n}\n')),Object(i.b)("p",null,"Here are list of supported parameter binding decorators "),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Binding"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.user()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind current login user (JWT claims) into parameter")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.ctx()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind request context into parameter")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.request()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind request into parameter")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.body()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind request body into parameter (optional, or use a custom class type to automatically bind request body to parameter)")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.query()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind request query into parameter")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.header()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind request header into parameter")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.cookie()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind request cookie into parameter")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@bind.custom()")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Bind custom parameter binding implementation into parameter")))),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"documentation")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Refer to the complete documentation about ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/controller"}),"controller")," "))),Object(i.b)("h3",{id:"plug-facilities-into-application-bootstrap"},"Plug Facilities Into Application Bootstrap"),Object(i.b)("p",null,"The entry point of Plumier application is an instance of ",Object(i.b)("inlineCode",{parentName:"p"},"Plumier"),". ",Object(i.b)("inlineCode",{parentName:"p"},"Plumier")," consist of features that can be enabled/disabled by installing ",Object(i.b)("inlineCode",{parentName:"p"},"Facility"),". "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { JwtAuthFacility } from "@plumier/jwt"\nimport { SwaggerFacility } from "@plumier/swagger"\nimport { TypeORMFacility } from "@plumier/typeorm"\nimport Plumier, { WebApiFacility, ControllerFacility } from "plumier"\n\nnew Plumier()\n    .set(new WebApiFacility())\n    .set(new ControllerFacility({ \n      controller: "./**/*controller.{ts,js}", \n      rootPath: "api/v1"\n    }))\n    .set(new JwtAuthFacility())\n    .set(new TypeORMFacility())\n    .set(new SwaggerFacility())\n    .listen(8000);\n')),Object(i.b)("p",null,"Above code will start Plumier application with some installed features and listens to the port 8000. Plumier provided some facilities for development convenient they are:"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Facility"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Includes"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Package"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"WebApiFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Body parser, CORS middleware, Default dependency resolver"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"plumier"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"RestApiFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Same as ",Object(i.b)("inlineCode",{parentName:"td"},"WebApiFacility")," except its provided more strict restful API status code"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"plumier"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"ControllerFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Host controllers by path or type, furthermore controllers can be grouped and versioned"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"plumier"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"LoggerFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Simple request logging and error reporting"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"plumier"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"JwtAuthFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Jwt middleware, Enable authorization, Jwt Secret configuration"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@plumier/jwt"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"MongooseFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Mongoose schema generator, generic controller and connection management"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@plumier/mongoose"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"TypeORMFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Provided helper and generic controller for TypeORM"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@plumier/typeorm"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"ServeStaticFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Serve static files middleware"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@plumier/serve-static"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"SwaggerFacility")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Serve Swagger UI and generate Open API 3.0 automatically"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"@plumier/swagger"))))),Object(i.b)("h3",{id:"layout-your-source-code-freely"},"Layout Your Source Code Freely"),Object(i.b)("p",null,"Plumier doesn't strictly provided the project layout, but it provided flexibility to layout your project files match your need. Below are some common project structure usually used by developers, You can choose any of them match your like."),Object(i.b)("h3",{id:"single-file-style"},"Single File Style"),Object(i.b)("p",null,"This style usually used by Express for small app with a fewer code. Put all controllers and entities in a single file and configure the bootstrap application like below."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"new Plumier()\n    .set(new WebApiFacility({ controller: ___filename }))\n    .listen(8000)\n")),Object(i.b)("p",null,"By providing ",Object(i.b)("inlineCode",{parentName:"p"},"__filename")," you ask Plumier to search your controllers in the same file. "),Object(i.b)("h3",{id:"classic-mvc-style"},"Classic MVC Style"),Object(i.b)("p",null,"This is default style supported by Plumier. Classic MVC style app separate project files by functionalities such as ",Object(i.b)("inlineCode",{parentName:"p"},"controllers"),", ",Object(i.b)("inlineCode",{parentName:"p"},"models"),", ",Object(i.b)("inlineCode",{parentName:"p"},"repositories"),", ",Object(i.b)("inlineCode",{parentName:"p"},"entities"),", ",Object(i.b)("inlineCode",{parentName:"p"},"services")," etc."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"+ src/\n  + controller/\n    - item.controller.ts\n    - user.controller.ts\n  + repository/\n    - item.repository.ts\n    - user.repository.ts\n  + service/\n    - item.service.ts\n    - user.service.ts\n  + entity/\n    - item.entity.ts\n    - user.entity.ts\n  - app.ts\n  - index.ts\n- package.json\n- tsconfig.json\n")),Object(i.b)("p",null,"No more setup required to use this style."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"new Plumier()\n    .set(new WebApiFacility())\n    .listen(8000)\n")),Object(i.b)("h3",{id:"modular-style"},"Modular Style"),Object(i.b)("p",null,"This style usually used by modern frameworks, files separated by module per directory, each directory consist of controller, model, service, entity etc separated in different files. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"+ src/\n  + item/\n    - item.controller.ts\n    - item.entity.ts\n    - item.service.ts\n    - item.repository.ts\n  + user/\n    - user.controller.ts\n    - user.entity.ts\n    - user.service.ts\n    - user.repository.ts\n  - app.ts\n  - index.ts\n- package.json\n- tsconfig.json\n")),Object(i.b)("p",null,"Use ",Object(i.b)("inlineCode",{parentName:"p"},"ControllerFacility")," to locate the controller location. Plumier will automatically search through all files to find controllers."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'new Plumier()\n    .set(new WebApiFacility())\n    .set(new ControllerFacility({ controller: "./*/*.controller.{ts,js}" }))\n    .listen(8000)\n')))}p.isMDXComponent=!0}}]);